import{r as k,u as h,cS as M,cT as b,j as e,q as E,a8 as B,s as v,bm as I,bR as a,h as g,l as A,A as L,D as R,a9 as $,I as N,n as P,C as U,aM as F,o as O,p as H}from"./strapi-YAFrxjfj.js";const V=s=>k.useEffect(s,W),W=[],q=["years","months","days","hours","minutes","seconds"],S=k.forwardRef(({timestamp:s,customIntervals:n=[],...l},i)=>{const{formatRelativeTime:d,formatDate:o,formatTime:c}=h(),u=M({start:s,end:Date.now()}),x=q.find(r=>u[r]>0&&Object.keys(u).includes(r)),j=b(s)?-u[x]:u[x],m=n.find(r=>u[r.unit]<r.threshold),p=m?m.text:d(j,x,{numeric:"auto"});return e.jsx("time",{ref:i,dateTime:s.toISOString(),role:"time",title:`${o(s)} ${c(s)}`,...l,children:p})}),X=({permissions:s,headers:n=[],isLoading:l=!1,tokens:i=[],onConfirmDelete:d,tokenType:o})=>{const[{query:c}]=E(),{formatMessage:u,locale:x}=h(),[,j]=c&&c.sort?c.sort.split(":"):[void 0,"ASC"],m=B(),{trackUsage:p}=v(),r=I(x),f=[...i].sort((t,y)=>j==="DESC"?r.compare(y.name,t.name):r.compare(t.name,y.name)),{canDelete:C,canUpdate:T,canRead:D}=s,w=t=>()=>{D&&(p("willEditTokenFromList",{tokenType:o}),m(t.toString()))};return e.jsx(a.Root,{headers:n,rows:f,isLoading:l,children:e.jsxs(a.Content,{children:[e.jsx(a.Head,{children:n.map(t=>e.jsx(a.HeaderCell,{...t},t.name))}),e.jsx(a.Empty,{}),e.jsx(a.Loading,{}),e.jsx(a.Body,{children:f.map(t=>e.jsxs(a.Row,{onClick:w(t.id),children:[e.jsx(a.Cell,{maxWidth:"25rem",children:e.jsx(g,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0,children:t.name})}),e.jsx(a.Cell,{maxWidth:"25rem",children:e.jsx(g,{textColor:"neutral800",ellipsis:!0,children:t.description})}),e.jsx(a.Cell,{children:e.jsx(g,{textColor:"neutral800",children:e.jsx(S,{timestamp:new Date(t.createdAt)})})}),e.jsx(a.Cell,{children:t.lastUsedAt&&e.jsx(g,{textColor:"neutral800",children:e.jsx(S,{timestamp:new Date(t.lastUsedAt),customIntervals:[{unit:"hours",threshold:1,text:u({id:"Settings.apiTokens.lastHour",defaultMessage:"last hour"})}]})})}),T||D||C?e.jsx(a.Cell,{children:e.jsxs(A,{justifyContent:"end",children:[T&&e.jsx(J,{tokenName:t.name,tokenId:t.id}),C&&e.jsx(_,{tokenName:t.name,onClickDelete:()=>d?.(t.id),tokenType:o})]})}):null]},t.id))})]})})},z={edit:{id:"app.component.table.edit",defaultMessage:"Edit {target}"},read:{id:"app.component.table.read",defaultMessage:"Read {target}"}},G=({tokenName:s,tokenId:n,buttonType:l="edit",children:i})=>{const{formatMessage:d}=h();return e.jsx(Q,{tag:F,to:n.toString(),onClick:o=>o.stopPropagation(),title:d(z[l],{target:s}),variant:"ghost",size:"S",children:i})},Q=O(H)`
  padding: 0.7rem;

  & > span {
    display: flex;
  }
`,_=({tokenName:s,onClickDelete:n,tokenType:l})=>{const{formatMessage:i}=h(),{trackUsage:d}=v(),o=()=>{d("willDeleteToken",{tokenType:l}),n()};return e.jsx(R.Root,{children:e.jsxs($,{paddingLeft:1,onClick:c=>c.stopPropagation(),children:[e.jsx(R.Trigger,{children:e.jsx(N,{label:i({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${s}`}),name:"delete",variant:"ghost",children:e.jsx(P,{})})}),e.jsx(U,{onConfirm:o})]})})},J=({tokenName:s,tokenId:n})=>e.jsx(G,{tokenName:s,tokenId:n,children:e.jsx(L,{})});export{X as T,V as u};
